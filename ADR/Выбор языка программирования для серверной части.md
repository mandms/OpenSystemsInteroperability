# ADR - Выбор языка программирования для серверной части

Дата: 17.09.2024
Статус: Принято
## Контекст
При разработке приложения для обмена фотографиями, аналогичного Instagram, был принят серверный подход с использованием микросервисной архитектуры. Это решение обеспечивает необходимую гибкость, масштабируемость и отказоустойчивость, что особенно важно для создания высоконагруженной платформы, способной обрабатывать большое количество запросов одновременно.

Приложение должно поддерживать хранение и мгновенную доставку фотографий, а также обеспечить взаимодействие пользователей через лайки и комментарии. Учитывая эти требования, выбор серверного языка программирования становится критически важным для достижения высоких показателей производительности и надежности.

**Поскольку проект - учебный, предполагается что в разработке приложения принимает участие полноценная команда с опытом разработки на Golang**
## Рассматриваемые варианты
- JavaScript (TypeScript) - Широко используемый язык для клиентской и серверной разработки. TypeScript добавляет статическую типизацию к JavaScript.
- C# - Язык от Microsoft, отлично подходит для разработки серверных приложений, особенно в экосистеме .NET.
- Python - Простой и читаемый язык, популярный для веб-разработки и научных приложений.
- Go - Компилируемый язык с акцентом на производительность и параллелизм, популярен при разработке  высоконагруженных приложений.
## Решение
Для серверной части был выбран язык Go.
## Обоснование

**Плюсы:**
- Высокая производительность и масштабируемость. Go был выбран за его выдающиеся характеристики в области производительности и масштабируемости.
- Язык компилируется в машинный код, что обеспечивает быструю работу приложений, а встроенная поддержка горутин позволяет эффективно управлять большим числом одновременных задач, что критично для обработки большого количества медиафайлов и запросов.
- Низкие затраты на ресурсы. Go создает компактные и ресурсоэффективные приложения, что помогает снизить затраты на серверную инфраструктуру и улучшает общую производительность системы.
- Масштабируемость: встроенная поддержка многопоточности и лёгкость в обработке конкурентных задач позволяют масштабировать приложение с минимальными затратами на управление потоками.

Минусы go:
- Ограниченная стандартная библиотека: несмотря на простоту, для некоторых задач может потребоваться разработка собственных решений или использование сторонних библиотек.

Минусы и плюсы других языков:

**C#**:
**Плюсы:**
- Производительность: Высокая производительность благодаря компиляции в промежуточный код и оптимизации во время выполнения.
- Поддержка микросервисов: Хорошо работает с фреймворками, такими как ASP.NET Core, который предоставляет мощные инструменты для разработки веб-приложений и микросервисов.
- Строгая типизация: Упрощает отладку и повышает надежность кода.  
**Минусы:**
- Более высокие накладные расходы: C# использует виртуальную машину (CLR), что может привести к большим накладным расходам в плане производительности и потребления памяти по сравнению с Go
- Для запуска приложений на C# требуется платформа .NET, которая добавляет дополнительные требования к инфраструктуре и сложности при деплое, особенно в кросс-платформенных окружениях.

**Python и JS**:

**Плюсы:**
- **Простота и читаемость:** Оба языка известны своей легкостью в изучении и использовании. Python предлагает понятный и лаконичный синтаксис, а JavaScript (в частности, с использованием TypeScript) улучшает читаемость через статическую типизацию.
- **Широкая экосистема библиотек:** У обоих языков имеется множество библиотек и фреймворков, что упрощает разработку. Python предлагает Django и Flask, в то время как JavaScript поддерживает Node.js и множество других фреймворков
- **Большое сообщество:** Оба языка обладают активными сообществами, что облегчает поиск решений и поддержку, а также способствует постоянному улучшению инструментов и библиотек.
**Минусы:**
- Низкая производительность: Python и JS — интерпретируемые языки, которые существенно медленнее компилируемых языков, таких как Go
- Сложности с типизацией: Статическая типизация в этих языках отсутствует, что приводит к большему числу ошибок в рантайме и увеличивает сложность сопровождения больших микросервисов.

**Учитывая плюсы и минусы рассмотренных языков и опыт команды, был выбран язык Go.**
## Последствия

  
Выбор Go как серверного языка может значительно улучшить производительность, масштабируемость и надежность нашего приложения, что делает его оптимальным выбором для разработки приложения фотохостинга.

Риски:
- Меньшее сообщество разработчиков по сравнению с более распространёнными языками (например, C# или JavaScript), что может усложнить найм специалистов. Возможные решения: 
	- **Обучение сотрудников:** Инвестируйте в обучение существующих разработчиков Go через курсы, вебинары и внутренние тренинги.
	- **Создание учебных проектов:** Разработайте небольшие внутренние проекты на Go, чтобы команда могла практиковаться и накапливать опыт.

## Затронутые области
- Бэкенд и API (обработка пользовательских данных, загрузка и хранение медиафайлов, управление социальными взаимодействиями, интеграция с внешними системами).

- Инфраструктура (серверы, базы данных для хранения контента и пользовательской информации, системы безопасности и мониторинга).
## История
Решения были приняты 17 сентября. Обсуждение касалось вопросов развертывании и масштабируемости. В итоге был выбран язык Go как наиболее подходящая для создания высоконагруженного продукта фотохостинга.