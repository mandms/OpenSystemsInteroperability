# ADR - Выбор архитектурного подхода
Дата: 17.09.2024  
Статус: Принято
## Контекст
При разработке приложения для обмена фотографиями , аналогичного Instagram, необходимо создать высоконагруженную платформу, способную обрабатывать большое количество запросов одновременно.

Приложение должно поддерживать хранение и мгновенную доставку фото, а также взаимодействие пользователей через лайки и комментарии.

Основные задачи включают обеспечение высокой доступности и отказоустойчивости, масштабируемости для обработки роста числа активных пользователей и контента.

Ограничения включают строгие требования к безопасности личных данных пользователей и защите их контента от несанкционированного доступа.

**Поскольку проект - учебный, предполагается что в разработке приложения принимает участие полноценная команда с опытом разработки на Golang**

## Рассматриваемые варианты
Бессерверная архитектура: Архитектура, в которой разработчики не управляют серверами напрямую, а используют облачные функции, автоматически масштабируемые в зависимости от нагрузки.

Серверная архитектура: Архитектура, где разработчик полностью контролирует серверную инфраструктуру, включая установку, настройку и обслуживание серверов.

## Решение
Был выбран серверный подход.

## Обоснование

Были рассмотрены плюсы и минусы обоих подходов:
#### Плюсы серверной архитектуры
- Производительность: предсказуемое распределение ресурсов, возможность контроля загрузки серверов.
- Контроль и кастомизация: возможность детальной настройки серверов под конкретные задачи, что важно для сложных или узкоспециализированных приложений.
- Безопасность: прямой контроль над мерами безопасности, которые можно настраивать в зависимости от потребностей приложения.
#### Минусы серверной архитектуры
- Зависимость от инфраструктуры: Привязка к конкретной серверной инфраструктуре может ограничивать гибкость и переносимость приложения.
-  Высокая стоимость: Требует значительных инвестиций в оборудование, программное обеспечение и обслуживание.

#### Плюсы бессерверной архитектуры
- **Экономичность:** Оплата только за фактическое потребление ресурсов без необходимости поддерживать собственные сервера.
- **Масштабируемость:** Автоматическое масштабирование в зависимости от нагрузки без вмешательства пользователей.
- **Гибкость:** Легко разворачивается и масштабируется, минимизируя затраты на управление инфраструктурой.
#### Минусы бессерверной архитектуры
- Ограниченные возможности настройки: Меньший контроль над инфраструктурой, что может быть проблематично для сложных приложений.
- **Безопасность:** Ограниченные возможности настройки мер безопасности по сравнению с серверной архитектурой, особенно при работе с конфиденциальными данными.

В итоге был выбран серверный подход, поскольку он позволяет обеспечить стабильную и предсказуемую работу при высокой нагрузке, а также даёт возможность разворачивать сложные системы, требующие постоянного мониторинга.
Бессерверная архитектура оказалась менее подходящей для данного случая из-за  строгих требований к безопасности.
Для приложений, обрабатывающих конфиденциальные данные, серверный подход позволяет реализовать более надежные механизмы безопасности.
## Последствия

Выбор серверной архитектуры для фотохостинга повлияет на проект следующим образом:
- **Стабильная производительность:** Серверная архитектура обеспечит стабильную работу и предсказуемую производительность даже при высокой нагрузке, что важно для фотохостинга с большим числом пользователей.
- **Повышенная безопасность:** Прямой контроль над инфраструктурой позволит внедрить строгие меры безопасности, что особенно важно при работе с конфиденциальными данными.
- **Управление ресурсами:** Возможность контролировать использование ресурсов, что позволит оптимизировать затраты и предотвращать перегрузки.

Риски:
- Сбой оборудования: Регулярное резервное копирование данных, использование отказоустойчивых систем хранения и мониторинг состояния оборудования помогут минимизировать риски.
- Перегрузка сервера: Необходимо правильно спроектировать архитектуру приложения и использовать механизмы автомасштабирования для предотвращения перегрузок.

## Затронутые области

Этим решением затронуты следующие части системы:

- Инфраструктура (серверы, базы данных для хранения контента и пользовательской информации, системы безопасности и мониторинга).

## История
  
Решения были приняты 17 сентября. Обсуждение касалось вопросов развертывания, масштабируемости и безопасности данных пользователей.

Рассматривались бессерверный и серверный подходы, их преимущества, недостатки и риски.

В итоге была выбрана серверная архитектура как наиболее подходящая для создания высоконагруженного продукта фотохостинга.