# ADR - Выбор языка программирования для серверной части

Дата: 17.09.2024

Статус: Принято

## Контекст

При разработке приложения для обмена фотографиями , аналогичного Instagram, необходимо создать высоконагруженную платформу, способную обрабатывать большое количество запросов одновременно. Приложение должно поддерживать хранение и мгновенную доставку фото, а также взаимодействие пользователей через лайки и комментарии.

Основные задачи включают обеспечение высокой доступности и отказоустойчивости, масштабируемости для обработки роста числа активных пользователей и контента.

Ограничения включают строгие требования к безопасности личных данных пользователей и защите их контента от несанкционированного доступа.

## Рассматриваемые варианты
 - JavaScript (TypeScript)
 - C#
 - Python
 - Go


## Решение

Для серверной части был выбран язык Go.

## Обоснование

- Высокая производительность и масштабируемость. Go был выбран за его выдающиеся характеристики в области производительности и масштабируемости.
  Язык компилируется в машинный код, что обеспечивает быструю работу приложений, а встроенная поддержка горутин позволяет эффективно управлять большим числом одновременных задач, что критично для обработки большого количества медиафайлов и запросов.
- Низкие затраты на ресурсы. Go создает компактные и ресурсоэффективные приложения, что помогает снизить затраты на серверную инфраструктуру и улучшает общую производительность системы.

  Минусы других языков:
C#:
 - Для запуска приложений на C# требуется платформа .NET, которая добавляет дополнительные требования к инфраструктуре и сложности при деплое, особенно в кросс-платформенных окружениях.
 - Более высокие накладные расходы: C# использует виртуальную машину (CLR), что может привести к большим накладным расходам в плане производительности и потребления памяти по сравнению с Go
   
Python и JS:
 - Низкая производительность: Python и JS — интерпретируемые языки, которые существенно медленнее компилируемых языков, таких как Go
 - Сложности с типизацией: Статическая типизация в этих языках отсутствует, что приводит к большему числу ошибок в рантайме и увеличивает сложность сопровождения больших микросервисов.

## Последствия

Плюсы:
 - Высокая производительность благодаря компиляции в машинный код и отличной работе с параллелизмом, что идеально подходит для обработки большого количества запросов и работы с медиафайлами.
 - Масштабируемость: встроенная поддержка многопоточности и лёгкость в обработке конкурентных задач позволяют масштабировать приложение с минимальными затратами на управление потоками.
 - Простота и быстрота разработки: лаконичный синтаксис Go ускоряет процесс написания и тестирования кода, что важно для быстрого выхода на рынок.
 - Низкое потребление ресурсов: Go позволяет создавать лёгкие приложения, что снижает затраты на инфраструктуру и улучшает отклик системы при высоких нагрузках.

Минусы:
 - Ограниченная стандартная библиотека: несмотря на простоту, для некоторых задач может потребоваться разработка собственных решений или использование сторонних библиотек.

Риски:
 - Меньшее сообщество разработчиков по сравнению с более распространёнными языками (например, C# или JavaScript), что может усложнить найм специалистов.

## Затронутые области

 - Бэкенд и API (обработка пользовательских данных, загрузка и хранение медиафайлов, управление социальными взаимодействиями, интеграция с внешними системами).
 - Инфраструктура (серверы, базы данных для хранения контента и пользовательской информации, системы безопасности и мониторинга).


## История

Решения были приняты 17 сентября. Обсуждение касалось вопросов развертывании и масштабируемости. В итоге был выбран язык Go как наиболее подходящая для создания высоконагруженного продукта фотохостинга.
